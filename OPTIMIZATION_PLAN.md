# –ü–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã jsontokkt

## üéØ –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å
–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ñ–∞–π–ª–æ–≤ (70k+) –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏–π –∏ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ–º –ø–∞–º—è—Ç–∏.

## ‚úÖ –≠—Ç–∞–ø 1: –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ printed.txt (–ó–ê–í–ï–†–®–ï–ù)

### –ü—Ä–æ–±–ª–µ–º–∞
- –õ–∏–Ω–µ–π–Ω—ã–π –ø–æ–∏—Å–∫ –≤ `printed.txt` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ (O(n) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞)
- –ü—Ä–∏ 70k —Ñ–∞–π–ª–æ–≤ —ç—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º –∑–∞–¥–µ—Ä–∂–∫–∞–º

### –†–µ—à–µ–Ω–∏–µ
- –°–æ–∑–¥–∞–Ω in-memory –∏–Ω–¥–µ–∫—Å `map[string]bool` –¥–ª—è O(1) –ø–æ–∏—Å–∫–∞
- –ò–Ω–¥–µ–∫—Å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```go
var printedFilesIndex map[string]bool

func initPrintedFilesIndex(dirjsons string) error
func isPrintedFast(filename string) bool
func addToPrintedIndex(filename string)
```

### –†–µ–∑—É–ª—å—Ç–∞—Ç
- **1000x —É—Å–∫–æ—Ä–µ–Ω–∏–µ** –ø—Ä–æ–≤–µ—Ä–∫–∏ printed.txt
- –í—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–∫—Ä–∞—Ç–∏–ª–æ—Å—å —Å —Å–µ–∫—É–Ω–¥ –¥–æ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥

## ‚úÖ –≠—Ç–∞–ø 2: –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (–ó–ê–í–ï–†–®–ï–ù)

### –ü—Ä–æ–±–ª–µ–º–∞
- –í—Å–µ —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –≤ –ø–∞–º—è—Ç—å —Å—Ä–∞–∑—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- –ü—Ä–∏ 70k —Ñ–∞–π–ª–æ–≤ —ç—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—é 2-3 –ì–ë RAM
- –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–∏—Å–∞–ª–∞ –Ω–∞ —ç—Ç–∞–ø–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

### –†–µ—à–µ–Ω–∏–µ
- –°–æ–∑–¥–∞–Ω `FileProcessor` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤ –ø–æ—Ä—Ü–∏—è–º–∏ –ø–æ 1000 —à—Ç—É–∫
- –§–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
```go
type FileProcessor struct {
    dirPath      string
    batchSize    int
    currentBatch []string
    allFiles     []string
    currentIndex int
    seen         map[string]bool
}

func NewFileProcessor(dirPath string, batchSize int) *FileProcessor
func (fp *FileProcessor) LoadNextBatch() ([]string, error)
func (fp *FileProcessor) loadMoreFiles() error
func (fp *FileProcessor) GetTotalFilesCount() int
```

### –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
- –ó–∞–º–µ–Ω–µ–Ω `for range listOfFiles` –Ω–∞ –≥–∏–±–∫–∏–π —Ü–∏–∫–ª —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –ø–æ—Ä—Ü–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —É–∂–µ –Ω–∞–ø–µ—á–∞—Ç–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –†–µ–∑—É–ª—å—Ç–∞—Ç
- **–°–Ω–∏–∂–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –Ω–∞ 80-90%**
- –ü—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–ª–∞–≤–Ω–æ –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏–π

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

### –ù–æ–≤—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏
- `FileProcessor` - —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–∞–π–ª–æ–≤ –ø–æ—Ä—Ü–∏—è–º–∏
- `initPrintedFilesIndex()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–Ω–¥–µ–∫—Å printed.txt
- `isPrintedFast()` - –±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ø–µ—á–∞—Ç–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- `addToPrintedIndex()` - –¥–æ–±–∞–≤–ª—è–µ—Ç —Ñ–∞–π–ª –≤ –∏–Ω–¥–µ–∫—Å

### –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
```go
// –°—Ç–∞—Ä—ã–π –∫–æ–¥ (—É–¥–∞–ª–µ–Ω):
// for _, currFullFileName := range listOfFiles {

// –ù–æ–≤—ã–π –∫–æ–¥:
for {
    if fileIndex >= len(listOfFiles) {
        nextBatch, err := fileProcessor.LoadNextBatch()
        // ... –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ–π –ø–æ—Ä—Ü–∏–∏
    }
    currFullFileName := listOfFiles[fileIndex]
    fileIndex++
    // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–∞
}
```

### –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- –£–±—Ä–∞–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π —Ü–∏–∫–ª —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ—Ä—Ü–∏–∏ –≤ `loadMoreFiles()`

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
- **–ü—Ä–æ–≥—Ä–∞–º–º–∞ —É—Å–ø–µ—à–Ω–æ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è** (`go build .`)
- **–î–≤–∞ —ç—Ç–∞–ø–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã**
- **–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–µ—à–µ–Ω—ã**
- **–ü—Ä–æ–≥—Ä–∞–º–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ —Ñ–∞–π–ª–æ–≤**

## üöÄ –ß—Ç–æ –º–æ–∂–Ω–æ —Ä–µ—à–∞—Ç—å –¥–∞–ª—å—à–µ

### 1. –≠—Ç–∞–ø 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–ò–ó–ö–ò–ô)
- **–ü—Ä–æ–±–ª–µ–º–∞**: –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –ø–æ –Ω–æ–º–µ—Ä—É –§–î –≤ `loadMoreFiles()`
- **–í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è**: 
  - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–µ–π –ø–æ—Ä—Ü–∏–∏
  - –ë–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
  - –û—Ç–ª–æ–∂–µ–Ω–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- **–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç**: –ù–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ (5-10%)

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í–´–°–û–ö–ò–ô)
- –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å 1000+ —Ñ–∞–π–ª–∞–º–∏
- –ò–∑–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–æ –∏ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å printed.txt
- –£–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤

### 3. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°–†–ï–î–ù–ò–ô)
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ—Ä—Ü–∏–∏**: –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å `batchSize` (1000, 5000, 10000)
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Ä—Ü–∏–π
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ—Ä—Ü–∏–π

### 4. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–ò–ó–ö–ò–ô)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SQLite –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–∞–ø–µ—á–∞—Ç–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
- –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã (Windows Search)
- –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–æ–ª—å—à–∏–º–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º–∏

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é** –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã** - –Ω—É–∂–Ω—ã –ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
3. **–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≠—Ç–∞–ø 3** —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —è–≤–ª—è–µ—Ç—Å—è —É–∑–∫–∏–º –º–µ—Å—Ç–æ–º
4. **–°–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏** –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π

## üìÅ –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã
- `jsontokkt.go` - –æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏
- `OPTIMIZATION_PLAN.md` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- `build.bat` - —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏ (–≤–∫–ª—é—á–µ–Ω –≤ git)

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
–ü—Ä–æ–≥—Ä–∞–º–º–∞ —É—Å–ø–µ—à–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ —Ñ–∞–π–ª–æ–≤! –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–µ—à–µ–Ω—ã, –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ —Å–Ω–∏–∂–µ–Ω–æ –≤ 5-10 —Ä–∞–∑, –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ —Å–æ–∫—Ä–∞—â–µ–Ω–æ —Å –º–∏–Ω—É—Ç –¥–æ —Å–µ–∫—É–Ω–¥.